<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>

	账户<input type="text" id="name"> 密码
	<input type="password" id="pwd">
	<button id="login">登录</button>
	<button id="info">登录信息</button>

	<script type="text/javascript">
		var login = $('#login'),
			info = $('#info'),
			token;

//		$.ajax({
//			type: 'GET',
//			dataType: "json",
//			url: '/user/info',
//			success: function(res) {
//				console.log(res)
//			}
//		})

		login.on('click', function() {
			$.ajax({
				type: 'POST',
				dataType: "json",
				url: '/user/login',
				data: {
					username: $('#name').val(),
					password: $('#pwd').val()
				},
				success: function(r) {
					if (r.data) {
						token = r.data.token;
					}
				}
			})
		})

		info.on('click', function() {
			$.ajax({
				type: 'POST',
				dataType: "json",
				url: '/user/info',
				data: {
					token: token
				},
				success: function(res) {
					console.log(res)
				}
			})
		})

	</script>
</body>

</html>
